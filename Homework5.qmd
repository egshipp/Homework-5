---
title: "Homework 5"
format: pdf
editor: visual
---

# Task 1: Conceptual Questions

-   What is the purpose of using cross-validation when fitting a random forest model?

    -   Cross-validation when fitting random forest models is not always necessary, but it is used to tune the random forest model by selecting the number of predictors that minimizes the log-loss metric.

-   Describe the bagged tree algorithm.

    -   The bagged tree algorithm is as follows:

    1.  Bootstrap sampling from an original data set
    2.  For each bootstrap sample, fit a tree model
    3.  Average the predictions for each tree model for regression or use majority vote across all the trees for classification.

-   What is meant by a general linear model?

    -   A general linear model is a statistical model used for prediction and inference that contains coefficients that are only linear by nature.

-   When fitting a multiple linear regression model, what does adding an interaction term do? That is, what does it allow the model to do differently as compared to when it is not included in the model?

    -   An interaction term allows two predictors to be dependent on each other while a model without an interaction term assumes that the predictors are independent of each other.

-   Why do we split our data into a training and test set?

    -   Data is split into a training and test set so that the model can be "trained" on one set of data and "tested" on a set that is completely independent from that the data that the model was trained on. If the data was not split, then the test would not be indicative of how well the model is able to make predictions.

# Task 2: Data Prep

## Packages and Data

```{r}
library(tidyverse)
library(tidymodels)
library(caret)
library(yardstick)
library(ggplot2)
library(viridis)

data <- read_csv("heart.csv")

```

## 1. Run and report summary() on your data set. Then, answer the following questions:

```{r}
summary(data)
```

a.  HeartDisease is categorized as a numeric variable

b.  This does not make sense because the HeartDisease is a binary variable which only takes on 0 and 1 which is moreso categorical. This being said, it would not make sense to do any numerical summaries on this variable.

## 2. Change HeartDisease to be the appropriate data type, and name it something different. In the same tidyverse pipeline, remove the ST_Slope variable and the original HeartDisease variable. Save your new data set as new_heart. We will use this new data set for the remainder of the assignment.

```{r}
new_heart <- data |>
  mutate(factor_HeartDisease = factor(HeartDisease)) |>
  select(-ST_Slope, -HeartDisease)
```

# Task 3: EDA
## 1. We are going to model someoneâ€™s age (our response variable) as a function of heart disease and their max heart rate. First, create the appropriate scatterplot to visualize this relationship. Add a line to the scatterplot that represents if someone has or does not have heart disease. Remove the standard error bars from the lines and add appropriate labels. Also, change the color pallet to be more colorblind friendly.

```{r}
ggplot(data = new_heart, aes(x = MaxHR, y = Age, color = factor_HeartDisease)) +
  geom_point() +
  geom_smooth(method = lm, se = F) +
  theme_minimal() +
  scale_color_viridis_d()
```
## 2. Based on visual evidence, do you think an interaction model or an additive model is more appropriate? Justify your answer.

Based on the visual evidence, it would be appropriate to use an interaction model because the slopes of the lines are not parallel, thus, indicating that there is interaction between the two predictor variables. 

